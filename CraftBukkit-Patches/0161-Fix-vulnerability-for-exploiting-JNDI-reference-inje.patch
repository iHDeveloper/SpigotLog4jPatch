From e2bf86639480c9cacfd4fdd0c89ce5ca3d68f74f Mon Sep 17 00:00:00 2001
From: iHDeveloper <git@ihdeveloper.me>
Date: Fri, 10 Dec 2021 21:04:45 +0300
Subject: [PATCH] Fix vulnerability for exploiting JNDI reference injection

Minecraft Server logs the message as "format" which leads to
allowing an attacker to abuse the JNDI reference injection and execute an RCE
to the server.

diff --git a/src/main/java/net/minecraft/server/MinecraftServer.java b/src/main/java/net/minecraft/server/MinecraftServer.java
index 1d29ae78..5a14ac0a 100644
--- a/src/main/java/net/minecraft/server/MinecraftServer.java
+++ b/src/main/java/net/minecraft/server/MinecraftServer.java
@@ -1109,7 +1109,7 @@ public abstract class MinecraftServer implements Runnable, ICommandListener, IAs
     }
 
     public void sendMessage(IChatBaseComponent ichatbasecomponent) {
-        MinecraftServer.LOGGER.info(ichatbasecomponent.c());
+        MinecraftServer.LOGGER.info("{}", ichatbasecomponent.c()); // Spigot
     }
 
     public boolean a(int i, String s) {
-- 
2.23.0

